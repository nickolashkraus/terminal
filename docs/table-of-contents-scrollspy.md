# Table of Contents Scrollspy

This theme provides functionality for table of contents scrollspy. When a user
scrolls through a page with a table of contents, the corresponding link in the
table of contents is highlighted. This functionality is provided by the
`table-of-contents.js` JavaScript module.

## What does this module do?

The `table-of-contents.js` JavaScript module adds scrollspy functionality to
the table of contents generated by Hugo. When a user scrolls through the page,
the link in the table of contents corresponding to the heading currently in
view is automatically highlighted. Additionally, clicking on a link in the
table of contents will smoothly scroll to the corresponding heading in the
document.

## How does it work?

Hugo renders a table of contents when the `{{ .TableOfContents }}` template
code is used. The table of contents has the following form:

**HTML**

```html
<nav id="TableOfContents">
  <ul>
    <li><a href="#heading-1">Heading 1</a></li>
    <li><a href="#heading-2">Heading 2</a></li>
    <li><a href="#heading-3">Heading 3</a></li>
  </ul>
</nav>
```

**Rendered**  
Heading 1  
Heading 2  
Heading 3

First, all the links (anchor elements) are retrieved from the table of
contents:

```html
<a href="#heading-1">
<a href="#heading-2">
<a href="#heading-3">
```

Using the `href` from the links, each heading element in the document is
retrieved:

```html
<h2 id="heading-1">
<h2 id="heading-2">
<h2 id="heading-3">
```

For each heading element, a click event listener is added, which smoothly
scrolls to the heading when the corresponding link in the table of contents is
clicked.

Finally, a scroll event listener is added, which highlights the link in the
table of contents that corresponds to the heading currently in view. The
"active" class is added to the link, which changes its appearance.

## Prerequisites

To use this module, you'll need:

1. Tailwind CSS
2. The following CSS classes:

```css
#TableOfContents a {
  @apply opacity-50 transition-opacity duration-200 hover:opacity-100;
}

#TableOfContents a.active {
  @apply opacity-100;
}
```

## Using the module

Import the module:

```javascript
import { initTableOfContents } from './modules/table-of-contents.js'
```

Then initialize it when your page loads:

```javascript
document.addEventListener('DOMContentLoaded', () => {
  initTableOfContents()
})
```

The module exports a single function, `initTableOfContents()`, which sets up
all necessary event listeners and initializes the highlighting of the currently
active table of contents item.
